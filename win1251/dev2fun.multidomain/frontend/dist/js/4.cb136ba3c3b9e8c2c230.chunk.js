(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{THca:function(t,e,a){"use strict";a.r(e);var l=a("yXPU"),n=a.n(l),i=a("cDf5"),s=a.n(i),r=a("o0o1"),o=a.n(r),u=a("GXCG"),c={name:"settings",props:{value:Object,settings:Object,locale:Object},data:function(){return{domainKeysLocal:[]}},computed:{inputValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},isDirectoryMode:function(){return"directory"===this.inputValue.logic_subdomain}},methods:{addNewRow:function(){"object"!=s()(this.inputValue.MAPLIST)&&(this.inputValue.MAPLIST=[]),this.inputValue.MAPLIST.push({KEY:"",SUBNAME:""}),this.$forceUpdate()},addNewRowExclude:function(){"object"!=s()(this.inputValue.EXCLUDE_PATH)&&(this.inputValue.EXCLUDE_PATH=[]),this.inputValue.EXCLUDE_PATH.push(""),this.$forceUpdate()},removeExcludePath:function(t){this.inputValue.EXCLUDE_PATH.splice(t,1),this.$forceUpdate()},removeMapList:function(t){this.inputValue.MAPLIST.splice(t,1),this.$forceUpdate()},updateUrlrewrite:function(){var t=this;return n()(o.a.mark((function e(){var a,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post(t.settings.url,{action:"updateUrlrewrite",sessid:BX.bitrix_sessid(),typeSubdomain:t.inputValue.type_subdomain,logicSubdomain:t.inputValue.logic_subdomain});case 3:if((a=e.sent).success){e.next=6;break}throw new Error(null!==(l=a.msg.exception)&&void 0!==l?l:a.msg);case 6:t.$emit("showMessage",a.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t.$emit("error",e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},getDomainKeys:function(){var t=this;return n()(o.a.mark((function e(){var a,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isEmpty(t.iblocksLocal)){e.next=2;break}return e.abrupt("return",t.iblocksLocal);case 2:return e.prev=2,e.next=5,u.a.post(t.settings.url,{action:"getDomainKeys",sessid:BX.bitrix_sessid(),typeSubdomain:t.inputValue.type_subdomain});case 5:if((a=e.sent).success){e.next=8;break}throw new Error(null!==(l=a.msg.exception)&&void 0!==l?l:a.msg);case 8:t.domainKeysLocal=a.data,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),t.$emit("error",e.t0.message);case 14:return e.abrupt("return",t.iblocksLocal);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))()}}},d=a("KHd+"),p=Object(d.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"adm-detail-content-table edit-table",attrs:{id:"edit1_edit_table"}},[a("tbody",[a("tr",[a("td",{staticClass:"adm-detail-content-cell-l",attrs:{width:"40%"}},[a("label",[t._v("\n                    "+t._s(t.locale.LABEL_ENABLE)+":\n                ")])]),t._v(" "),a("td",{staticClass:"adm-detail-content-cell-r",attrs:{width:"60%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue.enable,expression:"inputValue.enable"}],staticClass:"adm-designed-checkbox",attrs:{type:"checkbox",name:"enable",id:"enable",value:"Y"},domProps:{checked:Array.isArray(t.inputValue.enable)?t._i(t.inputValue.enable,"Y")>-1:t.inputValue.enable},on:{change:function(e){var a=t.inputValue.enable,l=e.target,n=!!l.checked;if(Array.isArray(a)){var i=t._i(a,"Y");l.checked?i<0&&t.$set(t.inputValue,"enable",a.concat(["Y"])):i>-1&&t.$set(t.inputValue,"enable",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.inputValue,"enable",n)}}}),t._v(" "),a("label",{staticClass:"adm-designed-checkbox-label",attrs:{for:"enable",title:""}})])]),t._v(" "),a("tr",[a("td",{staticClass:"adm-detail-content-cell-l",attrs:{width:"40%"}},[a("label",{attrs:{for:"logic_subdomain"}},[t._v("\n                    "+t._s(t.locale.LABEL_ALGORITM)+":\n                ")])]),t._v(" "),a("td",{staticClass:"adm-detail-content-cell-r",attrs:{width:"60%"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.inputValue.logic_subdomain,expression:"inputValue.logic_subdomain"}],attrs:{id:"logic_subdomain",name:"logic_subdomain"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.inputValue,"logic_subdomain",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"subdomain"}},[t._v("\n                        "+t._s(t.locale.LABEL_SUBDOMAIN)+" (sub.site.ru)\n                    ")]),t._v(" "),a("option",{attrs:{value:"directory"}},[t._v("\n                        "+t._s(t.locale.LABEL_DIRECTORY)+" (site.ru/sub/)\n                    ")])])])]),t._v(" "),a("tr",[a("td",{staticClass:"adm-detail-content-cell-l",attrs:{width:"40%"}},[a("label",{attrs:{for:"type_subdomain"}},[t._v("\n                    "+t._s(t.locale.LABEL_TYPE)+":\n                ")])]),t._v(" "),a("td",{staticClass:"adm-detail-content-cell-r",attrs:{width:"60%"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.inputValue.type_subdomain,expression:"inputValue.type_subdomain"}],attrs:{name:"type_subdomain"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.inputValue,"type_subdomain",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"city"}},[t._v(t._s(t.locale.LABEL_CITY))]),t._v(" "),a("option",{attrs:{value:"country"}},[t._v(t._s(t.locale.LABEL_COUNTRY))]),t._v(" "),a("option",{attrs:{value:"lang"}},[t._v(t._s(t.locale.LABEL_TYPE_LANG))]),t._v(" "),a("option",{attrs:{value:"virtual"}},[t._v(t._s(t.locale.LABEL_VIRTUAL))])])])]),t._v(" "),a("tr",[a("td",{staticClass:"adm-detail-content-cell-l",attrs:{width:"40%"}},[a("label",{attrs:{for:"enable_replace_links"}},[t._v("\n                    "+t._s(t.locale.LABEL_ENABLE_REPLACE_LINKS)+":\n                ")])]),t._v(" "),a("td",{staticClass:"adm-detail-content-cell-r",attrs:{width:"60%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue.enable_replace_links,expression:"inputValue.enable_replace_links"}],attrs:{type:"checkbox",id:"enable_replace_links",name:"enable_replace_links"},domProps:{checked:Array.isArray(t.inputValue.enable_replace_links)?t._i(t.inputValue.enable_replace_links,null)>-1:t.inputValue.enable_replace_links},on:{change:function(e){var a=t.inputValue.enable_replace_links,l=e.target,n=!!l.checked;if(Array.isArray(a)){var i=t._i(a,null);l.checked?i<0&&t.$set(t.inputValue,"enable_replace_links",a.concat([null])):i>-1&&t.$set(t.inputValue,"enable_replace_links",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.inputValue,"enable_replace_links",n)}}})])]),t._v(" "),a("tr",[a("td",{staticClass:"adm-detail-content-cell-l",attrs:{width:"40%"}},[a("label",{attrs:{for:"key_ip"}},[t._v("\n                    "+t._s(t.locale.LABEL_IP)+":\n                ")])]),t._v(" "),a("td",{staticClass:"adm-detail-content-cell-r",attrs:{width:"60%"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.inputValue.key_ip,expression:"inputValue.key_ip"}],attrs:{name:"key_ip"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.inputValue,"key_ip",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"HTTP_X_REAL_IP"}},[t._v("HTTP_X_REAL_IP (IP:"+t._s(t.settings.realIp)+")")]),t._v(" "),a("option",{attrs:{value:"REMOTE_ADDR",selected:""}},[t._v("REMOTE_ADDR (IP:"+t._s(t.settings.remoteAddr)+")")])])])]),t._v(" "),a("tr",[a("td",{staticClass:"adm-detail-content-cell-l",attrs:{width:"40%"}},[a("label",{attrs:{for:"lang_default"}},[t._v("\n                    "+t._s(t.locale.LABEL_DOMAIN_DEFAULT)+":\n                ")])]),t._v(" "),a("td",{staticClass:"adm-detail-content-cell-r",attrs:{width:"60%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue.domain_default,expression:"inputValue.domain_default"}],attrs:{type:"text",name:"domain_default"},domProps:{value:t.inputValue.domain_default},on:{input:function(e){e.target.composing||t.$set(t.inputValue,"domain_default",e.target.value)}}}),t._v(" "),a("br"),t._v(" "),a("i",[t._v(t._s(t.locale.DESCRIPTION_DOMAIN_DEFAULT))])])]),t._v(" "),a("tr",[a("td",{staticClass:"adm-detail-content-cell-l",attrs:{width:"40%"}},[a("label",[t._v("\n                    "+t._s(t.locale.LABEL_MAPPING_LIST)+":\n                ")])]),t._v(" "),a("td",{staticClass:"adm-detail-content-cell-r",attrs:{width:"60%"}},[a("table",{staticClass:"nopadding",attrs:{cellpadding:"0",cellspacing:"0",border:"0",width:"100%",id:"d2f_mapping_list"}},[a("tbody",[t._l(t.inputValue.MAPLIST,(function(e,l){return a("tr",[a("td",[t.domainKeysLocal.length?a("select",{directives:[{name:"model",rawName:"v-model",value:e.KEY,expression:"map.KEY"}],attrs:{name:"MAPLIST["+l+"][KEY]"},on:{change:function(a){var l=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(e,"KEY",a.target.multiple?l:l[0])}}},t._l(t.domainKeysLocal,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                                    "+t._s(e.title)+"\n                                ")])})),0):a("input",{directives:[{name:"model",rawName:"v-model",value:e.KEY,expression:"map.KEY"}],staticStyle:{float:"left"},attrs:{type:"text",size:"50",name:"MAPLIST["+l+"][KEY]",placeholder:t.locale.LABEL_MAPPING_LIST_KEY},domProps:{value:e.KEY},on:{input:function(a){a.target.composing||t.$set(e,"KEY",a.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.SUBNAME,expression:"map.SUBNAME"}],staticStyle:{float:"left"},attrs:{type:"text",size:"50",name:"MAPLIST["+l+"][SUBNAME]",placeholder:t.locale.LABEL_MAPPING_LIST_SUBNAME},domProps:{value:e.SUBNAME},on:{input:function(a){a.target.composing||t.$set(e,"SUBNAME",a.target.value)}}}),t._v(" "),a("div",{style:{position:"relative",float:"left",float:"left",height:"26px",width:"40px"}},[a("span",{staticClass:"adm-warning-close",style:{"background-position-y":"-2929px",height:"inherit"},on:{click:function(e){return t.removeMapList(l)}}})])])])})),t._v(" "),a("tr",[a("td",[a("input",{attrs:{type:"button",value:t.locale.LABEL_ADD},on:{click:function(e){return e.preventDefault(),t.addNewRow()}}})])])],2)])])]),t._v(" "),a("tr",[a("td",{staticClass:"adm-detail-content-cell-l",attrs:{width:"40%"}},[a("label",{attrs:{for:"path_to_optipng"}},[t._v("\n                    "+t._s(t.locale.LABEL_EXCLUDE_PATH)+":\n                ")])]),t._v(" "),a("td",{staticClass:"adm-detail-content-cell-r",attrs:{width:"60%"}},[a("table",{staticClass:"nopadding",attrs:{cellpadding:"0",cellspacing:"0",border:"0",width:"100%",id:"d2f_exclude_path"}},[a("tbody",[t._l(t.inputValue.EXCLUDE_PATH,(function(e,l){return a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue.EXCLUDE_PATH[l],expression:"inputValue.EXCLUDE_PATH[indx]"}],style:{float:"left"},attrs:{type:"text",size:"80",placeholder:t.locale.LABEL_EXCLUDE_PATH_REG},domProps:{value:t.inputValue.EXCLUDE_PATH[l]},on:{input:function(e){e.target.composing||t.$set(t.inputValue.EXCLUDE_PATH,l,e.target.value)}}}),t._v(" "),a("div",{style:{position:"relative",float:"left",height:"26px"}},[a("span",{staticClass:"adm-warning-close",style:{"background-position-y":"-2929px",height:"inherit"},on:{click:function(e){return t.removeExcludePath(l)}}})])])])})),t._v(" "),a("tr",[a("td",[a("input",{attrs:{type:"button",value:t.locale.LABEL_ADD},on:{click:function(e){return e.preventDefault(),t.addNewRowExclude()}}})])])],2)])])]),t._v(" "),a("tr",{staticClass:"heading"},[a("td",{attrs:{colspan:"2"}},[a("b",[t._v(t._s(t.locale.LABEL_URLREWRITE))])])]),t._v(" "),a("tr",[a("td",{staticClass:"adm-detail-content-cell-r",attrs:{width:"100%",colspan:"2"}},[a("div",{staticStyle:{margin:"0 auto",display:"block",width:"50%"}},[a("div",[a("input",{staticStyle:{margin:"0 auto",display:"block"},attrs:{type:"button",value:"Обновить urlrewrite"},on:{click:function(e){return e.preventDefault(),t.updateUrlrewrite.apply(null,arguments)}}})]),t._v(" "),a("div",{staticClass:"adm-info-message"},[a("i",[t._v(t._s(t.locale.LABEL_URLREWRITE_INFO1))]),t._v(" "),a("br"),t._v(" "),a("b",[a("i",[t._v(t._s(t.locale.LABEL_URLREWRITE_INFO2))])])])])])])])])}),[],!1,null,"30a7a544",null);e.default=p.exports},cDf5:function(t,e){function a(e){return t.exports=a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,a(e)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports}}]);