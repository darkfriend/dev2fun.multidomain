(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"5Nu0":function(e,t,a){"use strict";a.r(t);var l=a("cDf5"),n=a.n(l),i=a("yXPU"),s=a.n(i),r=a("o0o1"),u=a.n(r),o=a("GXCG"),c={name:"multilang",props:{langActive:{type:Boolean,default:function(){return!1}},langDefault:{type:String,default:function(){return"ru"}},locale:Object,settings:Object,value:Object,site:String},data:function(){return{load:!1,active:!1,lang:"",iblocksLocal:[],fieldsLocal:[],fieldsByIndexLocal:[],fieldsSectionLocal:[],fieldsSectionByIndexLocal:[],fieldTypes:["element","section"]}},created:function(){var e=this;return s()(u.a.mark((function t(){var a,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.active=e.langActive,e.lang=e.langDefault,e.isEmpty(e.inputValue.lang_fields)){t.next=18;break}return t.next=5,e.getIblocks();case 5:t.t0=u.a.keys(e.inputValue.lang_fields);case 6:if((t.t1=t.t0()).done){t.next=18;break}if(a=t.t1.value,"section"!==(l=e.inputValue.lang_fields[a]).fieldType){t.next=14;break}return t.next=12,e.getFieldsSection(a,l.iblock);case 12:t.next=16;break;case 14:return t.next=16,e.getFields(a,l.iblock);case 16:t.next=6;break;case 18:return t.next=20,e.$nextTick();case 20:e.load=!0;case 21:case"end":return t.stop()}}),t)})))()},mounted:function(){"object"!=n()(this.inputValue.lang_fields)&&(this.inputValue.lang_fields=[])},computed:{inputValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{iblocks:function(){return this.isEmpty(this.iblocksLocal)?(this.getIblocks(),this.iblocksLocal):this.iblocksLocal},fields:function(e){var t=this;if(this.isEmpty(e)&&0!=e)return[];if(this.isEmpty(this.inputValue.lang_fields[e])||this.isEmpty(this.inputValue.lang_fields[e].iblock))return[];var a=this.inputValue.lang_fields[e].iblock;return a?this.isEmpty(this.fieldsLocal[a])?(this.getFields(a),setTimeout((function(){t.$set(t.fieldsByIndexLocal,e,t.fieldsLocal[a])}),1e3),this.fieldsLocal[a]):(this.$set(this.fieldsByIndexLocal,e,this.fieldsLocal[a]),this.fieldsLocal[a]):[]},getIblocks:function(){var e=this;return s()(u.a.mark((function t(){var a,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isEmpty(e.iblocksLocal)){t.next=2;break}return t.abrupt("return",e.iblocksLocal);case 2:return t.prev=2,t.next=5,o.a.post(e.settings.url,{action:"getIblocks",sessid:BX.bitrix_sessid(),siteId:e.site});case 5:if((a=t.sent).success){t.next=8;break}throw new Error(null!==(l=a.msg.exception)&&void 0!==l?l:a.msg);case 8:e.iblocksLocal=a.data,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),e.$emit("error",t.t0.message);case 14:return t.abrupt("return",e.iblocksLocal);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},getFields:function(e){var t=arguments,a=this;return s()(u.a.mark((function l(){var n,i;return u.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(n=t.length>1&&void 0!==t[1]?t[1]:null){l.next=9;break}if(!a.isEmpty(e)||0==e){l.next=4;break}return l.abrupt("return");case 4:if(!a.isEmpty(a.inputValue.lang_fields[e])){l.next=6;break}return l.abrupt("return");case 6:if(!a.isEmpty(a.inputValue.lang_fields[e]).iblock){l.next=8;break}return l.abrupt("return");case 8:n=a.inputValue.lang_fields[e].iblock;case 9:if(a.isEmpty(a.fieldsLocal[n])){l.next=12;break}return a.$set(a.fieldsByIndexLocal,e,a.fieldsLocal[n]),l.abrupt("return",a.fieldsLocal[n]);case 12:return l.prev=12,l.next=15,o.a.post(a.settings.url,{action:"getFields",id:n,sessid:BX.bitrix_sessid(),siteId:a.site});case 15:if((i=l.sent).success){l.next=18;break}throw new Error(i.msg);case 18:return a.fieldsLocal[n]=i.data,a.$set(a.fieldsByIndexLocal,e,i.data),l.abrupt("return",a.fieldsLocal[n]);case 23:l.prev=23,l.t0=l.catch(12),a.$emit("error",l.t0.message);case 26:case"end":return l.stop()}}),l,null,[[12,23]])})))()},getFieldsSection:function(e){var t=arguments,a=this;return s()(u.a.mark((function l(){var n,i;return u.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(n=t.length>1&&void 0!==t[1]?t[1]:null){l.next=9;break}if(!a.isEmpty(e)||0==e){l.next=4;break}return l.abrupt("return");case 4:if(!a.isEmpty(a.inputValue.lang_fields[e])){l.next=6;break}return l.abrupt("return");case 6:if(!a.isEmpty(a.inputValue.lang_fields[e]).iblock){l.next=8;break}return l.abrupt("return");case 8:n=a.inputValue.lang_fields[e].iblock;case 9:if(a.isEmpty(a.fieldsSectionLocal[n])){l.next=12;break}return a.$set(a.fieldsByIndexLocal,e,a.fieldsSectionLocal[n]),l.abrupt("return",a.fieldsSectionLocal[n]);case 12:return l.prev=12,l.next=15,o.a.post(a.settings.url,{action:"getFieldsSection",id:n,sessid:BX.bitrix_sessid(),siteId:a.site});case 15:if((i=l.sent).success){l.next=18;break}throw new Error(i.msg);case 18:return a.fieldsSectionLocal[n]=i.data,a.$set(a.fieldsByIndexLocal,e,i.data),l.abrupt("return",a.fieldsSectionLocal[n]);case 23:l.prev=23,l.t0=l.catch(12),a.$emit("error",l.t0.message);case 26:case"end":return l.stop()}}),l,null,[[12,23]])})))()},addSupportLangField:function(){this.inputValue.lang_fields.push({iblock:"",field:""}),this.fieldsByIndexLocal.push({groups:[],items:[]}),this.$forceUpdate()},changeIblock:function(e){this.$forceUpdate()},changeFieldType:function(e){var t=this;setTimeout((function(){"section"===t.inputValue.lang_fields[e].fieldType?t.getFieldsSection(e):t.getFields(e)}),1e3)},removeRow:function(e){this.inputValue.lang_fields.splice(e,1),this.fieldsByIndexLocal.splice(e,1)}}},d=a("KHd+"),p=Object(d.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.load?a("table",{staticClass:"adm-detail-content-table edit-table",attrs:{id:"edit3_edit_table"}},[a("tbody",[a("tr",[a("td",{staticClass:"adm-detail-content-cell-l",attrs:{width:"40%"}},[a("label",{attrs:{for:"enable_multilang"}},[e._v("\n                "+e._s(e.locale.LABEL_ENABLE_MULTILANG)+":\n            ")])]),e._v(" "),a("td",{staticClass:"adm-detail-content-cell-r",attrs:{width:"60%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue.enable_multilang,expression:"inputValue.enable_multilang"}],attrs:{type:"checkbox",id:"enable_multilang",name:"enable_multilang",value:"Y"},domProps:{checked:Array.isArray(e.inputValue.enable_multilang)?e._i(e.inputValue.enable_multilang,"Y")>-1:e.inputValue.enable_multilang},on:{change:function(t){var a=e.inputValue.enable_multilang,l=t.target,n=!!l.checked;if(Array.isArray(a)){var i=e._i(a,"Y");l.checked?i<0&&e.$set(e.inputValue,"enable_multilang",a.concat(["Y"])):i>-1&&e.$set(e.inputValue,"enable_multilang",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.inputValue,"enable_multilang",n)}}})])]),e._v(" "),a("tr",[a("td",{staticClass:"adm-detail-content-cell-l",attrs:{width:"40%"}},[a("label",{attrs:{for:"lang_default"}},[e._v("\n                "+e._s(e.locale.LABEL_LANG_DEFAULT)+":\n            ")])]),e._v(" "),a("td",{staticClass:"adm-detail-content-cell-r",attrs:{width:"60%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue.lang_default,expression:"inputValue.lang_default"}],attrs:{type:"text",id:"lang_default",name:"lang_default"},domProps:{value:e.inputValue.lang_default},on:{input:function(t){t.target.composing||e.$set(e.inputValue,"lang_default",t.target.value)}}})])]),e._v(" "),a("tr",[a("td",{staticClass:"adm-detail-content-cell-l",attrs:{width:"40%"}},[a("label",{attrs:{for:"enable_hreflang"}},[e._v("\n                "+e._s(e.locale.LABEL_ENABLE_HREFLANG)+":\n            ")])]),e._v(" "),a("td",{staticClass:"adm-detail-content-cell-r",attrs:{width:"60%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue.enable_hreflang,expression:"inputValue.enable_hreflang"}],attrs:{type:"checkbox",id:"enable_hreflang",name:"enable_hreflang",value:"Y"},domProps:{checked:Array.isArray(e.inputValue.enable_hreflang)?e._i(e.inputValue.enable_hreflang,"Y")>-1:e.inputValue.enable_hreflang},on:{change:function(t){var a=e.inputValue.enable_hreflang,l=t.target,n=!!l.checked;if(Array.isArray(a)){var i=e._i(a,"Y");l.checked?i<0&&e.$set(e.inputValue,"enable_hreflang",a.concat(["Y"])):i>-1&&e.$set(e.inputValue,"enable_hreflang",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.inputValue,"enable_hreflang",n)}}})])]),e._v(" "),a("tr",{staticClass:"heading"},[a("td",{attrs:{colspan:"2"}},[a("b",[e._v(e._s(e.locale.D2F_MULTIDOMAIN_LABEL_SUPPORT_TRANSLATE))])])]),e._v(" "),e._l(e.inputValue.lang_fields,(function(t,l){return a("tr",[a("td",{staticClass:"adm-detail-content-cell-l",attrs:{width:"40%"}},[a("label",{attrs:{for:"lang_default"}},[e._v("\n                "+e._s(e.locale.LABEL_LANG_SUPPORT_FIELDS)+":\n            ")])]),e._v(" "),a("td",{staticClass:"adm-detail-content-cell-r",attrs:{width:"60%"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.inputValue.lang_fields[l].iblock,expression:"inputValue.lang_fields[key].iblock"}],attrs:{type:"text"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.inputValue.lang_fields[l],"iblock",t.target.multiple?a:a[0])},function(t){return e.changeIblock(l)}]}},e._l(e.iblocks().groups,(function(t){return a("optgroup",{attrs:{label:t.label}},e._l(e.iblocks().items,(function(l){return l.group==t.id?a("option",{domProps:{value:l.id}},[e._v(e._s(l.label))]):e._e()})),0)})),0),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.inputValue.lang_fields[l].fieldType,expression:"inputValue.lang_fields[key].fieldType"}],attrs:{type:"text",placeholder:e.locale.D2F_MULTIDOMAIN_PLACEHOLDER_TYPE,disabled:e.isEmpty(e.inputValue.lang_fields[l].iblock)},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.inputValue.lang_fields[l],"fieldType",t.target.multiple?a:a[0])},function(t){return e.changeFieldType(l)}]}},[a("option",{attrs:{value:""}}),e._v(" "),e._l(e.fieldTypes,(function(t){return a("option",{domProps:{value:t}},[e._v("\n                    "+e._s(t)+"\n                ")])}))],2),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.inputValue.lang_fields[l].field,expression:"inputValue.lang_fields[key].field"}],attrs:{type:"text"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.inputValue.lang_fields[l],"field",t.target.multiple?a:a[0])}}},e._l(e.fieldsByIndexLocal[l].groups,(function(t){return a("optgroup",{attrs:{label:t.label}},e._l(e.fieldsByIndexLocal[l].items,(function(l){return l.group==t.id?a("option",{domProps:{value:l.id}},[e._v(e._s(l.label))]):e._e()})),0)})),0),e._v(" "),a("input",{attrs:{type:"button",value:e.locale.D2F_MULTIDOMAIN_LABEL_DELETE},on:{click:function(t){return t.preventDefault(),e.removeRow(l)}}})])])})),e._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[a("input",{attrs:{type:"button",value:e.locale.LABEL_ADD},on:{click:function(t){return t.preventDefault(),e.addSupportLangField.apply(null,arguments)}}})])])],2)]):e._e()}),[],!1,null,"6208909e",null);t.default=p.exports},cDf5:function(e,t){function a(t){return e.exports=a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,a(t)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}}]);